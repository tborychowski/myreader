!function($){"use strict";var keyBreaker=/[^\[\]]+/g,numberMatcher=/^[\-+]?[0-9]*\.?[0-9]+([eE][\-+]?[0-9]+)?$/,isNumber=function(value){if(typeof value==="number")return true;if(typeof value!=="string")return false;return value.match(numberMatcher)};$.fn.extend({formParams:function(params,convert){if(typeof params==="boolean"){convert=params;params=null}if(params)return this.setParams(params,convert);else if(this[0].nodeName.toLowerCase()==="form"&&this[0].elements){return jQuery(jQuery.makeArray(this[0].elements)).getParams(convert)}},setParams:function(params,clear){this.find("[name]").each(function(){var name=$(this).attr("name"),value=params[name];if(name.indexOf("[")>-1){var names=name.replace(/\]/g,"").split("["),i=0,n=null,v=params;for(;n=names[i++];)if(v[n])v=v[n];else{v=undefined;break}value=v}if(clear!==true&&value===undefined)return;if(value===null||value===undefined)value="";if(this.type==="radio")this.checked=this.value==value;else if(this.type==="checkbox")this.checked=value;else{if("placeholder"in document.createElement("input"))this.value=value;else{var el=$(this);if(this.value!=value&&value!=="")el.data("changed",true);if(value==="")el.data("changed",false).val(el.attr("placeholder"));else this.value=value}}})},getParams:function(convert){var data={},current;convert=convert===undefined?false:convert;this.each(function(){var el=this,type=el.type&&el.type.toLowerCase();if(type==="submit"||!el.name)return;var key=el.name,value=$.data(el,"value")||$.fn.val.call([el]),parts=key.match(keyBreaker),lastPart;if(el.type==="radio"&&!el.checked)return;if(el.type==="checkbox")value=el.checked;var $el=$(el);if($el.data("changed")!==true&&value===$el.attr("placeholder"))value="";if(convert){if(isNumber(value)){var tv=parseFloat(value),cmp=tv+"";if(value.indexOf(".")>0)cmp=tv.toFixed(value.split(".")[1].length);if(cmp===value)value=tv}else if(value==="true")value=true;else if(value==="false")value=false;if(value==="")value=undefined}current=data;for(var i=0;i<parts.length-1;i++){if(!current[parts[i]])current[parts[i]]={};current=current[parts[i]]}lastPart=parts[parts.length-1];if(current[lastPart]){if(!$.isArray(current[lastPart])){current[lastPart]=current[lastPart]===undefined?[]:[current[lastPart]]}current[lastPart].push(value)}else if(!current[lastPart])current[lastPart]=value});return data}})}(jQuery);